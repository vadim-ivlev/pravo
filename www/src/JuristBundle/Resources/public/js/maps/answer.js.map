{"version":3,"sources":["common.js","../node_modules/browser-pack/_prelude.js","app/Resources/public/blocks/main/b-answer/scripts/b-answer.js","app/Resources/public/scripts/answer.js","app/Resources/public/scripts/modules/ReadMore.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","/var/www/pravo/www/app/Resources/public/blocks/main/b-answer/scripts/b-answer.js","module","$","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","addClass","init","thanx","id","attr","ajax","url","success","data","status","append","css","setCookie","value","expires","path","domain","secure","Date","toGMTString","escape","push","join","html","rating","now","expireTime","getTime","error","console","log","on","/var/www/pravo/www/app/Resources/public/scripts/answer.js","bAnswer","readMore","../blocks/main/b-answer/scripts/b-answer","./modules/ReadMore","/var/www/pravo/www/app/Resources/public/scripts/modules/ReadMore.js","ReadMore","articleText","querySelector","outletsJson","innerHTML","JSON","parse","m","obj","find","el","href","title"],"mappings":"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","file":"answer.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"/var/www/pravo/www/app/Resources/public/blocks/main/b-answer/scripts/b-answer.js\":[function(require,module,exports){\n$(function () {\r\n\tif(getCookie('rating') != undefined){\r\n        $(\".js-link-btn-thanx\").addClass('b-link-btn_thanx-disabled');\t\t\r\n\t}\r\n\tfunction getCookie(name) {\r\n        var matches = document.cookie.match(new RegExp(\r\n            \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n        ));\r\n        return matches ? decodeURIComponent(matches[1]) : undefined;\r\n    }\r\n});\r\n\r\nvar init = function() {\r\n\r\n    var thanx = function() {\r\n        let id = $('.js-link-btn-thanx').attr('id');\r\n\r\n        $.ajax({\r\n            url: 'https://pravo.rg.ru/rating/' + id + '/',\r\n            success: function (data) {\r\n                function getCookie(name) {\r\n                    var matches = document.cookie.match(new RegExp(\r\n                        \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n                    ));\r\n                    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n                }\r\n\r\n                if((data.status == 200 || data.status == 500) && getCookie('rating') == undefined){\r\n                    $(\".b-rate__value\").html(data.rating);\r\n\r\n                    var now = new Date();\r\n                    var expireTime = now.getTime() + 100000*360000;\r\n\r\n                    function setCookie(name, value, expires, path, domain, secure) {\r\n\r\n                        expires instanceof Date ? expires = expires.toGMTString() : typeof(expires) == 'number' && (expires = (new Date(+(new Date) + expires * 1e3)).toGMTString());\r\n                        var r = [name + \"=\" + escape(value)], s, i;\r\n                        for(i in s = {expires: expires, path: path, domain: domain}){\r\n                            s[i] && r.push(i + \"=\" \r\n                                \r\n                                + s[i]);\r\n                        }\r\n                        return secure && r.push(\"secure\"), document.cookie = r.join(\";\"), true;\r\n                    }\r\n\r\n                    setCookie('rating', id, expireTime);\r\n                } else {\r\n                    $(\".b-rate__value\").append('<span class=\"b-rate__notification\">Вы уже сказали спасибо.</span>');\r\n                    $(\".js-link-btn-thanx\").css(\"pointer-events\", \"none\");\r\n                    // $(\".b-rate__value\").css({'font-size' : '10px'});\r\n                }\r\n            },\r\n            error: function (data) {\r\n                console.log(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    $('.js-link-btn-thanx').on(\"click\", function() {\r\n        thanx();\r\n        $(\".js-link-btn-thanx\").addClass('b-link-btn_thanx-disabled');\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n    init\r\n};\r\n\r\n\n},{}],\"/var/www/pravo/www/app/Resources/public/scripts/answer.js\":[function(require,module,exports){\n/**************************************************************************************\n МОДУЛИ\n *************************************************************************************/\n\n/**\n * Подключение модуля ответа на вопрос\n */\nvar bAnswer = require('../blocks/main/b-answer/scripts/b-answer'),\n\treadMore = require('./modules/ReadMore');\n\n$(function(){\n\n    bAnswer.init();\n    new readMore();\n\n});\n},{\"../blocks/main/b-answer/scripts/b-answer\":\"/var/www/pravo/www/app/Resources/public/blocks/main/b-answer/scripts/b-answer.js\",\"./modules/ReadMore\":\"/var/www/pravo/www/app/Resources/public/scripts/modules/ReadMore.js\"}],\"/var/www/pravo/www/app/Resources/public/scripts/modules/ReadMore.js\":[function(require,module,exports){\n/*\n * Модуль формирования врезок\n *\n */\n\n var ReadMore = function() {\n\n \tvar articleText = document.querySelector('.js-answer-text'),\n \t\ttoReplacePositions = articleText.innerHTML.match(/\\(\\(\\d+\\)\\)/gi),\n\t\toutletsJson = JSON.parse(document.querySelector('.outlets-json').innerHTML);\n\n  \tarticleText.innerHTML = articleText.innerHTML.replace(/\\<p.+\\(\\(\\d+\\)\\)\\<\\/p\\>/gi, m => {\n  \t\tlet obj = outletsJson.find(el => {\n  \t\t\treturn el.id === m.match(/(\\d+)/gi)[0];    \n  \t\t});\n  \t\t// if (!/outlets-json/gi.test(m)) {\n  \t\treturn `<div class=\"b-read-more b-read-more_${obj.float}\"><a class=\"b-read-more__link\" href=\"${obj.href}\">${obj.title}</a></div>`\n  \t\t// }\n  \t\t// return m;\n\t});\n\n };\n\n module.exports = ReadMore;\n},{}]},{},[\"/var/www/pravo/www/app/Resources/public/scripts/answer.js\"])\n\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","$(function () {\r\n\tif(getCookie('rating') != undefined){\r\n        $(\".js-link-btn-thanx\").addClass('b-link-btn_thanx-disabled');\t\t\r\n\t}\r\n\tfunction getCookie(name) {\r\n        var matches = document.cookie.match(new RegExp(\r\n            \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n        ));\r\n        return matches ? decodeURIComponent(matches[1]) : undefined;\r\n    }\r\n});\r\n\r\nvar init = function() {\r\n\r\n    var thanx = function() {\r\n        let id = $('.js-link-btn-thanx').attr('id');\r\n\r\n        $.ajax({\r\n            url: 'https://pravo.rg.ru/rating/' + id + '/',\r\n            success: function (data) {\r\n                function getCookie(name) {\r\n                    var matches = document.cookie.match(new RegExp(\r\n                        \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n                    ));\r\n                    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n                }\r\n\r\n                if((data.status == 200 || data.status == 500) && getCookie('rating') == undefined){\r\n                    $(\".b-rate__value\").html(data.rating);\r\n\r\n                    var now = new Date();\r\n                    var expireTime = now.getTime() + 100000*360000;\r\n\r\n                    function setCookie(name, value, expires, path, domain, secure) {\r\n\r\n                        expires instanceof Date ? expires = expires.toGMTString() : typeof(expires) == 'number' && (expires = (new Date(+(new Date) + expires * 1e3)).toGMTString());\r\n                        var r = [name + \"=\" + escape(value)], s, i;\r\n                        for(i in s = {expires: expires, path: path, domain: domain}){\r\n                            s[i] && r.push(i + \"=\" \r\n                                \r\n                                + s[i]);\r\n                        }\r\n                        return secure && r.push(\"secure\"), document.cookie = r.join(\";\"), true;\r\n                    }\r\n\r\n                    setCookie('rating', id, expireTime);\r\n                } else {\r\n                    $(\".b-rate__value\").append('<span class=\"b-rate__notification\">Вы уже сказали спасибо.</span>');\r\n                    $(\".js-link-btn-thanx\").css(\"pointer-events\", \"none\");\r\n                    // $(\".b-rate__value\").css({'font-size' : '10px'});\r\n                }\r\n            },\r\n            error: function (data) {\r\n                console.log(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    $('.js-link-btn-thanx').on(\"click\", function() {\r\n        thanx();\r\n        $(\".js-link-btn-thanx\").addClass('b-link-btn_thanx-disabled');\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n    init\r\n};\r\n\r\n","/**************************************************************************************\n МОДУЛИ\n *************************************************************************************/\n\n/**\n * Подключение модуля ответа на вопрос\n */\nvar bAnswer = require('../blocks/main/b-answer/scripts/b-answer'),\n\treadMore = require('./modules/ReadMore');\n\n$(function(){\n\n    bAnswer.init();\n    new readMore();\n\n});","/*\n * Модуль формирования врезок\n *\n */\n\n var ReadMore = function() {\n\n \tvar articleText = document.querySelector('.js-answer-text'),\n \t\ttoReplacePositions = articleText.innerHTML.match(/\\(\\(\\d+\\)\\)/gi),\n\t\toutletsJson = JSON.parse(document.querySelector('.outlets-json').innerHTML);\n\n  \tarticleText.innerHTML = articleText.innerHTML.replace(/\\<p.+\\(\\(\\d+\\)\\)\\<\\/p\\>/gi, m => {\n  \t\tlet obj = outletsJson.find(el => {\n  \t\t\treturn el.id === m.match(/(\\d+)/gi)[0];    \n  \t\t});\n  \t\t// if (!/outlets-json/gi.test(m)) {\n  \t\treturn `<div class=\"b-read-more b-read-more_${obj.float}\"><a class=\"b-read-more__link\" href=\"${obj.href}\">${obj.title}</a></div>`\n  \t\t// }\n  \t\t// return m;\n\t});\n\n };\n\n module.exports = ReadMore;"],"sourceRoot":"/source/"}