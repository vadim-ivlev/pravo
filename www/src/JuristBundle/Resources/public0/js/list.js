"use strict";!function t(e,i,s){function o(a,n){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!n&&u)return u(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return o(i?i:t)},c,c.exports,t,e,i,s)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({"/var/www/pravo/www/app/Resources/public/scripts/list.js":[function(t,e,i){RG.LoadChain=RG.LoadChain||t("./modules/LoadChain"),$(function(){new RG.LoadChain})},{"./modules/LoadChain":"/var/www/pravo/www/app/Resources/public/scripts/modules/LoadChain.js"}],"/var/www/pravo/www/app/Resources/public/scripts/modules/LoadChain.js":[function(t,e,i){var s=function(){var t=document.getElementById("loadChain"),e=new Ractive({el:"#loadChain",template:function(){var t="",e=this.get("tmplValue"),i="1"==e?"jurists":"questions",s=this;return $.get("https://pravo.rg.ru/views/includeTemplate/"+i+"_list.html").done(function(t){s.resetTemplate("<div>"+t+'</div>{{#show}}<div class="b-load-more"><div class="b-load-more__button{{# loading}} has-loading{{/ loading}}" on-click="activate">Загрузить еще</div></div>{{/show}}'),s.set("offset",+s.get("offset")+ +s.get("limit"))}),t},data:function(){return{items:null,uri:t.getAttribute("data-uri"),limit:t.getAttribute("data-limit"),offset:t.getAttribute("data-offset"),tmplValue:t.getAttribute("data-value"),search:t.getAttribute("data-search"),requestUri:t.getAttribute("data-request-uri"),show:!0,count:t.getAttribute("data-count")}},onrender:function(){var t=+this.get("count"),e=+this.get("limit");this.set("items",""),(!t||t<e)&&this.set("show",!1)}});e.on("activate",function(){var t=this.get("search"),i=window.location.href.indexOf("?")!==-1?"&":"?",s=+this.get("offset"),o=+this.get("limit"),r=this.get("requestUri"),a=1==t?this.get("uri")+i+"offset="+s+"&limit="+o+"&format=json":r+"/limit-"+o+"/offset-"+s+"/index.html?format=json",n=this;s+=o,n.set("loading",!0),fetch(a).then(function(t){return 200!==t.status?(console.log("Данные не получены. Ошибка "+t.status),void n.set("show",!1)):void t.json().then(function(t){""==e.get("items")?n.set("items",t.items_list):n.set("items",e.get("items").concat(t.items_list)),n.set("offset",s),n.set("loading",!1),t.items_list.length<o&&n.set("show",!1)})})})};e.exports=s},{}]},{},["/var/www/pravo/www/app/Resources/public/scripts/list.js"]);
//# sourceMappingURL=maps/list.js.map
